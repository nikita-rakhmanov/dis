<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative Music 3D Visualization</title>
    <link rel="stylesheet" href="visualization.css">
</head>
<body>
    <div id="canvas-container"></div>

    <div id="info-panel">
        <h1>ðŸŽµ Music Visualization</h1>
        <div class="status">
            <div class="status-indicator disconnected" id="status-indicator"></div>
            <span id="status-text">Connecting...</span>
        </div>
        <div class="note-info" id="latest-note">
            Waiting for notes...
        </div>
        <div id="stats">
            <div class="stat-row">
                <span class="stat-label">Total Notes:</span>
                <span class="stat-value" id="note-count">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Particles:</span>
                <span class="stat-value" id="particle-count">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">FPS:</span>
                <span class="stat-value" id="fps">0</span>
            </div>
        </div>
    </div>

    <div id="controls">
        <div class="control-row">
            <label>Rotation Speed</label>
            <input type="range" id="rotation-speed" min="0" max="100" value="30">
        </div>
        <div class="control-row">
            <label>Trail Length</label>
            <input type="range" id="trail-length" min="10" max="200" value="100">
        </div>
        <div class="control-row">
            <label>Particle Density</label>
            <input type="range" id="particle-density" min="100" max="2000" value="500">
        </div>
        <div class="control-row">
            <button id="clear-btn">Clear Visualization</button>
        </div>
    </div>

    <div id="legend">
        <h3>Mapping Legend</h3>
        <div class="legend-item">
            <span style="color: #ff6b6b;">X axis:</span> Pitch (1 octave)
        </div>
        <div class="legend-item">
            <span style="color: #4ecdc4;">Y axis:</span> Duration
        </div>
        <div class="legend-item">
            <span style="color: #95e1d3;">Z axis:</span> Timing/Step
        </div>
        <div class="legend-item" style="margin-top: 10px;">
            <div class="legend-color" style="background: linear-gradient(90deg, #ff0000, #00ff00, #0000ff);"></div>
            Color + Size: Velocity
        </div>
        <div class="legend-item" style="margin-top: 10px; font-size: 11px; color: #666;">
            Spheres pulse and fade<br>
            Camera orbits automatically
        </div>
    </div>

    <!-- Three.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="visualization.js"></script>
</body>
</html>
